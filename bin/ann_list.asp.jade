extends ./includes/dashboard_template.inc.jade
include ./includes/mixin.inc.jade

prepend footer
	-var iframedoc=true

append meta
	+meta-desc('Riverdale Collegiate Institute - Announcement List')
append title
	+page-title('Riverdale Collegiate Institute - Announcement List')
append css
	//Bootstrap Select Input css
	+stylesheet('css/bootstrap-combobox.css')
	style.
		.annDT{/*width:150px;*/}
		.btn-edit,.btn-verify{margin-bottom:5px;}
		.panel-table{padding: 0px 10px 0px 10px;}
		.panel-table table{margin-bottom:0px;}
		.info-item{margin-bottom:5px;}
		.table-condensed>tbody>tr>th,.table-condensed>tbody>tr>td{padding-right:0;}
append aspb1
	asp.
		dim action
		action=request("action")
append container
	h2.page-header Announcement Listing
	.row
		form
			.form-group.col-sm-4.col-md-3(style='margin-top:15px;')
				label.control-label(for='tblheader') Sort By Header: 
				select#tblheader.form-control(name='tblheader',autocomplete='off')
					option(value='title',selected) Title
					option(value='description') Description
					option(value='type') Type
					option(value='created_by') Created By
					option(value='modified_by') Modified By
					option(value='startdt') Start Date &amp; Time
					option(value='finishdt') Finish Date &amp; Time
					option(value='createddt') Created Date &amp; Time
					option(value='modifieddt') Modified Date &amp; Time
			.form-group.col-sm-4.col-md-3(style='margin-top:15px;')
				label.control-label(for='anntype') Announcement Type: 
				select#anntype.form-control(name='anntype',autocomplete='off')
					option(value='all',selected) All
					option(value='important') Important
					option(value='meeting') Meeting
					option(value='university') University
					option(value='volunteer') Volunteer
					option(value='sports') Sports
					option(value='other') Other
			.form-group.col-sm-4.col-md-3(style='margin-top:15px;')
				label.control-label(for='tblstat') List By Status: 
				select#tblstat.form-control(name='tblstat',autocomplete='off',required)
					option(value='all',selected) All
					option(value='currently_posted') Currently Posted
					option(value='previously_posted') Previously Posted
					option(value='verified') Verified
					option(value='verificatin_reqd') Needs Verification
		.panel-group
			.panel.panel-default
				.panel-heading.panel-table
					table#tbl-head.table.table-hover.table-condensed.table-responsive
						tr
							th.col-sm-4.col-md-2 Title
							th.col-sm-4.col-md-4 Description
							th.col-sm-1.col-md-1 Type
							th.col-sm-1.col-md-2 Start Date <wbr />&amp; Time
							th.col-sm-1.col-md-2 Finish Date <wbr />&amp; Time
							th.col-sm-1.col-md-1
append footer
	include ./includes/iframe_resize.inc.jade
	+js-inline
		|/*function adjustHeight(e){
		|	var n=$("#content_container",parent.document),m=e.next().children();

		|	if(m.hasClass('in')){
		|		n.height(n.height()-m.height()+10);
		|	}else{
		|		n.height(n.height()+m.height()-10);
		|	}
		|}*/
	//BootStrap Select Input
	+javascript('js/bootstrap-combobox.js')
	//Initialize select input fields
	+js-inline
		|$(function () {
		|	$('#tblheader').combobox();
		|	$('#tblheader').prev().children('div').children('input[type*=text]').attr('placeholder','Select Header To Sort By');

		|	$('#anntype').combobox();
		|	$('#anntype').prev().children('div').children('input[type*=text]').attr('placeholder','Select Announcement Type To Sort By');

		|	$('#tblstat').combobox();
		|	$('#tblstat').prev().children('div').children('input[type*=text]').attr('placeholder','Select Announcement Status To Sort By');
		|});
	//AJAX ASP
	+js-inline
		|function ajaxAsp(){
		|	$.ajax({
		|		async: true,
		|		url: 'ann_list_ajax.asp',
		|		type: 'get',
		|		//data: {'action':aval},
		|		mimeType: 'application/x-www-form-urlencoded',
		|		contentType: false,
		|		cache: false,
		|		processData: true,
		|		success:function (data,textStatus,jqXHR){$('.panel-group').append(data);},
		|		error:function (jqXHR,textStatus,errorThrown){$('.panel-group').append(textStatus);}
		|	});
		|}

		|ajaxAsp();